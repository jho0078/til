### 0.  발화

충남대학교에서 삼성화재 연수원까지 가는 102번버스 몇분남았어?



### 1. 도시정보찾기

`viv.geo`로 도시이름을 받아오기

LevelTwoDivision을 사용해야함

-  **버스노선정보조회 서비스(BusRouteInfoInqireService)** 
  - getCtyCodeList: List 중 이름과 같은 것을 찾아 도시코드를 구한다.



### 2. 102번 노선 찾기

버스번호로 노선별 경유정류장을 찾아야함 , 근데 버스 번호로 바로 노선 경유정류장을 찾는것이 없음 

=>  노선번호로 노선ID를 찾고 노선ID로 노선별 경유정류소 목록을 조회해야함

-  **버스노선정보조회 서비스(BusRouteInfoInqireService)** => *노선 ID를 찾기위한 서비스*

  - getRouteNoLIst(노선번호목록조회)

    ##### 요청 메시지 명세

    | 항목명(영문) | 항목명(국문) | 항목크기 | 항목구분 | 샘플데이터 | 항목설명 |
    | ------------ | ------------ | -------- | -------- | ---------- | -------- |
    | cityCode     | 도시코드     | 9        | 1        | 25         | 도시코드 |
    | routeNo      | 노선번호     | 30       | 0        | 5          | 노선번호 |

    ##### 응답 메시지 명세

    | 항목명(영문) | 항목명(국문) | 항목크기 | 항목구분 | 샘플데이터    | 항목설명 |
    | ------------ | ------------ | -------- | -------- | ------------- | -------- |
    | **routeid**  | 노선ID       | 30       | 1        | DJB30300004ND | 노선ID   |
    | routeno      | 노선번호     | 30       | 1        | 5             | 노선번호 |
    | routetp      | 노선유형     | 10       | 1        | 마을버스      | 노선유형 |

  - getRouteAcctoThrghSttnList(노선별경유정류소목록)

    ##### 요청 메시지 명세

    | 항목명(영문) | 항목명(국문)      | 항목크기 | 항목구분 | 샘플데이터    | 항목설명          |
    | ------------ | ----------------- | -------- | -------- | ------------- | ----------------- |
    | numOfRows    | 한 페이지 결과 수 | 4        | 0        | 10            | 한 페이지 결과 수 |
    | pageNo       | 페이지 번호       | 4        | 0        | 1             | 페이지 번호       |
    | cityCode     | 도시코드          | 5        | 1        | 25            | 도시코드          |
    | routeId      | 노선ID            | 30       | 1        | DJB30300004ND | 노선ID            |

    ##### 응답 메시지 명세

    | 항목명(영문) | 항목명(국문) | 항목크기 | 항목구분 | 샘플데이터      | 항목설명   |
    | ------------ | ------------ | -------- | -------- | --------------- | ---------- |
    | routeid      | 노선ID       | 30       | 1        | DJB30300004ND   | 노선ID     |
    | nodeid       | 정류소ID     | 30       | 1        | DJB1860090500ND | 정류소ID   |
    | nodenm       | 정류소명     | 30       | 1        | 유성고후문      | 정류소명   |
    | nodeno       | 정류소번호   | 100      | 0        | 44490           | 정류소번호 |
    | nodeord      | 정류소순번   | 4        | 1        | 1               | 정류소순번 |



### 3. 버스정류장ID를 이용하여 버스도착정보 받아오기

- **도착정보조회 서비스(ArvlInfoInqireService)**

  - getSttnAcctoSpcifyRouteBusArvlPrearngeInfoList(정류소별특정노선버스도착예정정보목록조회)

    ##### 요청 메시지 명세

    | 항목명(영문) | 항목명(국문) | 항목크기 | 항목구분 | 샘플데이터    | 항목설명 |
    | ------------ | ------------ | -------- | -------- | ------------- | -------- |
    | cityCode     | 도시코드     | 9        | 1        | 25            | 도시코드 |
    | nodeId       | 정류소ID     | 30       | 1        | DJB8001793ND  | 정류소ID |
    | routeId      | 노선ID       | 30       | 1        | DJB30300002ND | 노선ID   |

    #####  응답 메시지 명세

    | 항목명(영문)      | 항목명(국문)                  | 항목크기 | 항목구분 | 샘플데이터    | 항목설명                      |
    | ----------------- | ----------------------------- | -------- | -------- | ------------- | ----------------------------- |
    | nodeid            | 정류소ID                      | 30       | 1        | DJB8001793ND  | 정류소ID                      |
    | nodenm            | 정류소명                      | 30       | 1        | 북대전농협    | 정류소명                      |
    | routeid           | 노선ID                        | 30       | 1        | DJB30300002ND | 노선ID                        |
    | routeno           | 노선번호                      | 30       | 1        | 5             | 노선번호                      |
    | routetp           | 노선유형                      | 10       | 1        | 마을버스      | 노선유형                      |
    | arrprevstationcnt | 도착예정버스 남은 정류장 수   | 3        | 1        | 15            | 도착예정버스 남은 정류장 수   |
    | vehicletp         | 도착예정버스 차량유형         | 10       | 1        | 저상버스      | 도착예정버스 차량유형         |
    | arrtime           | 도착예정버스 도착예상시간[초] | 5        | 1        | 816           | 도착예정버스 도착예상시간[초] |

